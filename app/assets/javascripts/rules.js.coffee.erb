# Place all the behaviors and hooks related to the matching controller here.
<% url = Envelopes::Application.routes.url_helpers %>

$ ->
  $('select').selectToAutocomplete()
  $('input[type=text], input:not([type])]').selectOnFocus()

  $('.replacement-text input').autocomplete
    source: "<%= url.suggest_payee_transactions_path %>"
    minLength: 2
  
  $('.search-text input').autocomplete
    source: "<%= url.suggest_payee_transactions_path %>?original=1"
    minLength: 2
  
  setAltRowClass = ->
    rowClasses = ['alt', '']
    $('li:not(.head)').each (index, item) ->
      $item = $(item)
      $item.removeClass().addClass rowClasses[index % 2] unless $item.hasClass 'ui-sortable-helper'
  
  $('ul').sortable
    start: setAltRowClass
    stop: setAltRowClass
    change: setAltRowClass
      
